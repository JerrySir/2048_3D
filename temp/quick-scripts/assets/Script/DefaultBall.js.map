{"version":3,"sources":["DefaultBall.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;;;;;;;;;;;;;;;;;;;;;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAyC,+BAAY;IADrD;QAAA,qEAmEC;QA/DG,WAAK,GAAa,IAAI,CAAC;QAGvB,cAAQ,GAAiB,IAAI,CAAC;QAG9B,kBAAY,GAAiB,IAAI,CAAC;QAElC,UAAI,GAAW,OAAO,CAAC;QACvB,WAAK,GAAW,CAAC,CAAC;;QAqDlB,iBAAiB;IACrB,CAAC;oBAlEoB,WAAW;IAc5B,wBAAwB;IAExB,eAAe;IAEf,2BAAK,GAAL;IACA,CAAC;IAED,8BAAQ,GAAR;QACI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;QAC9B,UAAU;QACV,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;IACjD,CAAC;IAED,oBAAoB;IACpB,oCAAc,GAAd,UAAe,OAAY,EAAE,YAAgC,EAAE,aAAiC;QAC5F,IAAG,aAAa,CAAC,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE;YACtC,OAAO;SACV;QACD,IAAM,SAAS,GAAI,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,aAAW,CAAiB,CAAC,KAAK,CAAC;QACrF,IAAM,UAAU,GAAI,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,aAAW,CAAiB,CAAC,KAAK,CAAC;QACvF,IAAI,UAAU,GAAG,SAAS,EAAE;YACxB,OAAO;SACV;QAED,IAAM,SAAS,GAAI,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,aAAW,CAAiB,CAAC,IAAI,CAAC;QACpF,IAAM,UAAU,GAAI,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,aAAW,CAAiB,CAAC,IAAI,CAAC;QACtF,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAA;QACjB,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,CAAA;QAClB,IAAI,SAAS,KAAK,UAAU,EAAE;YAC1B,aAAa,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtC,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,KAAK,EAAE,CAAC,GAAG,CAAC,WAAW,EAAE;gBACxC,EAAE,CAAC,YAAY,EAAE,CAAC;aACrB;YACD,SAAS;YACT,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;YACjD,IAAM,SAAS,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;YAChC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,aAAW,CAAiB,CAAC,YAAY,CAAC,SAAS,GAAE,EAAE,CAAC,CAAC;YACzF,IAAI,SAAS,IAAI,IAAI,EAAE;gBACnB,YAAY,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACrC,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,KAAK,EAAE,CAAC,GAAG,CAAC,WAAW,EAAE;oBACxC,EAAE,CAAC,YAAY,EAAE,CAAC;iBACrB;aACJ;SACJ;IACL,CAAC;IAED,kCAAY,GAAZ,UAAa,IAAY;QACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;IAC7B,CAAC;;IA5DD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;8CACI;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;iDACO;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;qDACW;IATjB,WAAW;QAD/B,OAAO;OACa,WAAW,CAkE/B;IAAD,kBAAC;CAlED,AAkEC,CAlEwC,EAAE,CAAC,SAAS,GAkEpD;kBAlEoB,WAAW","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class DefaultBall extends cc.Component {\n\n    @property(cc.Label)\n    label: cc.Label = null;\n\n    @property(cc.AudioClip)\n    hitAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    destroyAudio: cc.AudioClip = null;\n\n    text: string = 'hello';\n    index: number = 0;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start () {\n    }\n\n    onEnable() {\n        this.label.string = this.text;\n        // 播放射出的声音\n        cc.audioEngine.play(this.hitAudio, false, 1);\n    }\n\n    // 只在两个碰撞体开始接触时被调用一次\n    onBeginContact(contact: any, selfCollider: cc.PhysicsCollider, otherCollider: cc.PhysicsCollider) {\n        if(otherCollider.node.group === 'Ground') {\n            return;\n        }\n        const selfIndex = (selfCollider.node.getComponent(DefaultBall) as DefaultBall).index;\n        const otherIndex = (otherCollider.node.getComponent(DefaultBall) as DefaultBall).index;\n        if (otherIndex > selfIndex) {\n            return;\n        }\n\n        const selfValue = (selfCollider.node.getComponent(DefaultBall) as DefaultBall).text;\n        const otherValue = (otherCollider.node.getComponent(DefaultBall) as DefaultBall).text;\n        cc.log(selfValue)\n        cc.log(otherValue)\n        if (selfValue === otherValue) {\n            otherCollider.node.removeFromParent();\n            if (cc.sys.platform === cc.sys.WECHAT_GAME) {\n                wx.vibrateShort();\n            }\n            // 播放消除声音\n            cc.audioEngine.play(this.destroyAudio, false, 1);\n            const nextValue = +selfValue * 2;\n            (selfCollider.node.getComponent(DefaultBall) as DefaultBall).setBallValue(nextValue +'');\n            if (nextValue >= 2048) {\n                selfCollider.node.removeFromParent();\n                if (cc.sys.platform === cc.sys.WECHAT_GAME) {\n                    wx.vibrateShort();\n                }\n            }\n        }\n    }\n\n    setBallValue(text: string) {\n        this.text = text;\n        this.label.string = text;\n    }\n\n    // update (dt) {}\n}\n"]}